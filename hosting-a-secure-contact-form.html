<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>A secure way to receive files and messages from confidential sources</title><meta name="description" content="Here's a method for a freelance, investigative journalist to host their own smaller version of a SecureDrop, to be reached by sources securely and anonymously."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="onionshare/"><link rel="alternate" type="application/atom+xml" href="https://treacherous.tech/feed.xml"><link rel="alternate" type="application/json" href="https://treacherous.tech/feed.json"><meta property="og:title" content="Onions and raspberries and file sharing"><meta property="og:image" content="https://treacherous.tech/media/posts/9/cover.png"><meta property="og:site_name" content="treacherous.tech"><meta property="og:description" content="Here's a method for a freelance, investigative journalist to host their own smaller version of a SecureDrop, to be reached by sources securely and anonymously."><meta property="og:url" content="https://treacherous.tech/hosting-a-secure-contact-form.html"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@andrewfordlyons"><meta name="twitter:title" content="Onions and raspberries and file sharing"><meta name="twitter:description" content="Here's a method for a freelance, investigative journalist to host their own smaller version of a SecureDrop, to be reached by sources securely and anonymously."><meta name="twitter:image" content="https://treacherous.tech/media/posts/9/cover.png"><link rel="shortcut icon" href="https://treacherous.tech/media/website/favicon.ico" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root{--body-font:'Ubuntu',sans-serif;--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:'Ubuntu',sans-serif;--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://treacherous.tech/assets/css/style.css?v=2225c0990de0fc654d3d6a43c0be230b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://treacherous.tech/hosting-a-secure-contact-form.html"},"headline":"Onions and raspberries and file sharing","datePublished":"2021-06-19T22:19","dateModified":"2021-06-26T00:53","image":{"@type":"ImageObject","url":"https://treacherous.tech/media/posts/9/cover.png","height":782,"width":1280},"description":" A secure file drop for journalists to to get the goods from their sources This site's&nbsp;contact page&nbsp;now includes a link to a secured way for sources to send me files or text messages privately, securely, and anonymously (if&hellip;","author":{"@type":"Person","name":"Yours Truly"},"publisher":{"@type":"Organization","name":"Yours Truly"}}</script><meta http-equiv="onion-location" content="https://ygwdnjw2gt6sabcrhjqmpgsn4hhddomhipdpxbx6bru2zr2damxevqyd.onion"></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://treacherous.tech/">treacherous.tech</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://treacherous.tech/contact.html" target="_self">Ping me</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://treacherous.tech/media/posts/9/cover.png" srcset="https://treacherous.tech/media/posts/9/responsive/cover-xs.png 300w, https://treacherous.tech/media/posts/9/responsive/cover-sm.png 480w, https://treacherous.tech/media/posts/9/responsive/cover-md.png 768w, https://treacherous.tech/media/posts/9/responsive/cover-lg.png 1024w, https://treacherous.tech/media/posts/9/responsive/cover-xl.png 1360w, https://treacherous.tech/media/posts/9/responsive/cover-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="782" width="1280" alt="raspberry Pi 4b"><figcaption>The Raspberry Pi 4b</figcaption></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-06-19T22:19">19 June 2021</time></div><h1>Onions and raspberries and file sharing</h1><div class="post__meta post__meta--author"><a href="https://treacherous.tech/authors/yours-truly/" class="feed__author invert">Yours Truly</a></div></div></header></div><div class="wrapper post__entry"><h3 id="a-secure-file-drop-for-journalists-to-to-get-the-goods-from-their-sources">A secure file drop for journalists to to get the goods from their sources</h3><p>This site's&nbsp;<a href="https://treacherous.tech/contact.html">contact page</a>&nbsp;now includes a link to a secured way for sources to send me files or text messages privately, securely, and anonymously (if they choose). It's built on software called <a href="https://onionshare.org" target="_blank">Onionshare</a>, and hosted on a <a href="https://www.raspberrypi.org/" target="_blank">Raspberry Pi</a>. Once you've sent the message or files, there's no trace of you having done so on the internet. And the files are locally stored on a device I have, not kept or copied&nbsp;somewhere on <em>the cloud</em>. A contact can only access this web form by using the <a href="https://www.torproject.org/" target="_blank">Tor Browser</a>, a privacy-first web browser that helps keep its user's site visits from being tracked or blocked. But with it, you can securely send me something <a href="http://entyms3fdn4fyl6lizog6hoztvaqkvv2njmcovslkm55xhahs7nnmiqd.onion" target="_blank">here</a>:<br><code>http://entyms3fdn4fyl6lizog6hoztvaqkvv2njmcovslkm55xhahs7nnmiqd.onion</code></p><p>In this post, I'm going to share with you the links and walk-through tutorials to make your own, and a few notes on what I did to set up my own kit along the way. This post is part of a little series on a proof-of-concept, secure workstation for freelance or independent investigative journalists. In the last post, we looked at how to create an <a href="https://treacherous.tech/mirroring-a-site-on-a-onion-address.html" target="_blank">unblockable and hidden</a>&nbsp;version of your own website&nbsp;using <a href="https://github.com/alecmuffett/eotk" target="_blank">EOTK</a>, and why you might want to do that for potential sources wanting to reach you.&nbsp; Now here's more secure and confidential a way for people to send you things.</p><h3 id="some-background-on-all-of-this">Some background on all of this...</h3><p>If you just want to get to the tech, skip this and scroll down to <strong>"The Goods"</strong> below.</p><p>So, I really don't like running web forms. They're clunky to set up, introduce security holes in websites, still need to send data some place you have to regularly check, and there's a good chance that you're just turning on a hose of toxic sludge and pointing at yourself. But what's even worse than those are email accounts. Sharing an email address on a website is basically like ringing the dinner bell for spammers and scams. And I'm not even going to get into the logistics of sharing a contact number. At least you can filter spam and skim junk mail. I've tended to direct any of the unwashed public who may want to ping me for some reason towards reasonably secure end-to-end encrypted apps that look like they're not requiring much user data to run.</p><p>As a journalist, you need reliable, secure, and checkable avenues for sources to reach you. Maybe they're sources you know and just need direction, but you need some access points for cold-callers. Attracting a journalistic source is a bit like phishing, though with less sociopathy. A bit less.</p><p>Freelancers&nbsp;— particularly those investigating organised crime, state violence,&nbsp; and corporate or government malfeasance&nbsp;— don't often have it as easy as staff journalists at some of the large news outlets, even if these are the same media organisations to whom freelancers are pitching their work. And yet often it's these journalists with the deeper background and expertise to better leverage high-value information on a given topic.</p><p>The New York Times or the Guardian have the resources to run their own <a href="https://securedrop.org/" target="_blank">SecureDrop</a>. Anti-corruption and whistle blower groups could invest in setting up a <a href="https://www.globaleaks.org/usecases/anti-corruption/" target="_blank">GlobaLeaks</a>. But as an independent operator, it's likely you don't have your own full time system administrator to set up, monitor and manage these kinds of things, and you probably didn't get into journalism to be one of those yourself. This is where something small, relatively simple and portable comes in, so today we're going to look at <a href="https://onionshare.org/" target="_blank">Onionshare</a>, and how to set it up.</p><h3 id="the-goods">The Goods</h3><p>Okay, let's make stuff. Nothing is new or unique in today's recipe. All the ingredients are easily found, and the directions are also already online. We're not inventing anything new.&nbsp; You don't need to become a full-blown sysadmin. You will need to become a mini sysadmin.</p><p><b>The recipe:</b><b><br></b><a href="https://onionshare.org/" target="_blank">Onionshare</a> is our main ingredient. It's developed and maintained by <a href="https://twitter.com/micahflee" target="_blank">Micah Lee</a>, the Director of Information Security at <a href="https://theintercept.com/" target="_blank">The Intercept</a>. You could run Onionshare on your own computer if you want. It works on Windows, Mac and Linux machines. But I'm assuming your writing device might be kind of precious to you. You may not want to leave it open to every random file you receive from a stranger over the internet. We want to compartmentalise our file-obtaining on its own small, isolated and much less expensive device.</p><p>So for these goals, we're following Micah's guide,&nbsp;"<a href="https://micahflee.com/2021/02/onionshare-anonymous-dropbox-raspberry-pi/" target="_blank">Running an OnionShare anonymous dropbox on a Raspberry Pi</a>." I've deviated from it in a couple of small ways (which I'll describe below), but it's a good step-by-step tour. Just follow it.</p><p><b>The ingredients:</b><br>You don't need the latest one, but to host my Onionshare I got the <a href="https://thepihut.com/collections/raspberry-pi/products/raspberry-pi-4-model-b?variant=31994565689406" target="_blank">Raspberry Pi 4 B, with 8gb ram</a>. Also, I wanted more storage space, so for this I got a 1TB USB stick. I recommend going with a fairly good sized SD card to run the software.&nbsp;I used a Sandisk card with 64gb. There are also little things you will need to make sure you have: all the cables, an SD card reader, an internet-connected router (if that isn't obvious).</p><p><strong>Optional:<br></strong>The walk-through shows you how to do everything from your computer, without typing directly into the Raspberry Pi, but I wanted to set my own password and username and see that things were working before connecting it to the internet router. So if you want to do that, you'll need a monitor, keyboard, mouse and the right cables for your Pi device.</p><p><b>Changing the username as well as the password:<br></b>After you set up the SD card with the Ubuntu software, you may not want your username to be "ubuntu."&nbsp;<a href="https://wiki.ubuntu.com/ARM/RaspberryPi#First_boot_.28Username.2FPassword.29" target="_blank">To change this</a> you need to go into your now-formatted SD card, and edit the user-data file on the system-boot partition.<br></p><p><strong>Adding more storage space:<br></strong>There's a good chance someone could send you more things than your Raspberry Pi's internal space can hold. And while you can SFTP from a remote computer to get files, you may want to actually physically transport them. So I wanted to make Onionshare store files to a USB stick.&nbsp;</p><p>Using the Pi device directly, <a href="https://vitux.com/how-to-manually-mount-unmount-a-usb-device-on-ubuntu/" target="_blank">I used these steps</a> to mount my USB stick and map it to a directory that Onionshare will be able to find to save any files it gets. By default, my USB stick was already formatted as exfat, not vfat, and I didn't want to reformat it. If that's your problem too, <a href="https://itsfoss.com/mount-exfat/" target="_blank">here's how to solve it</a>.</p><p>I also added a small file called "hello.txt" to my USB stick. This is useful because when you map it to its directory on the Pi, you can go there and quickly see if you've done things right or not. If you have, you'll find the little hello.txt waiting for you.</p><p><strong>Using Onionshare optional instructions:<br></strong>Because I added a different location to receive files, I couldn't just use the default command to start the software. Also, I wanted to give mine it's own name to personalise it. Before you launch your Onionshare for use, look at all the options with&nbsp;<code>onionshare-cli -h</code>.&nbsp;<br></p><p>So my command ended up looking similar to this:</p><pre class="line-numbers language-html"><code>onionshare-cli --receive --persistent ~/anon-dropbox.session --public --title treacherous.tech --data-dir ../../path_to/media_folder</code></pre><p>You can now test your Onionshare by visiting it on the Tor Browser. Send it a file, check you see it when you connect to it via SFTP or SSH, etc.</p><p>So,&nbsp; now that you have a way of getting files, what you will need are some methods and tools for securely checking and handling them. The next post I'll add on this blog will cover that.</p><hr class="separator separator--dots"><h3 id="notes">Notes:</h3><p><strong>Further optimising:<br></strong>I'd like to see how better customise my Onionshare to better show my ownership of it on the page, incorporate some of the other Onionshare tools such as a static website maker and chat board to create a little mini-site that all links together and back to my public site.</p><p><strong>Shopping list:<br></strong>Getting started with a Raspberry Pi isn't quite as simple as it's marketed to be. Some of us have drawers of cables and adaptors and old monitors laying around. Here are all the elements that actually went into this:</p><ul><li>Laptop (I used a Macbook)</li><li>Raspberry Pi 4 B, with 8gb ram<br></li><li>USB-C power supply<br></li><li>Sandisk SD card with 64gb<br></li><li>USB&nbsp;SD card card reader to format the SD card on the laptop</li><li>Ethernet cable</li><li>Internet router</li><li>Peripherals for the Raspberry Pi (because I did some things like install python, check for updates, customise the username and password, etc. on the Pi)</li><ul><li>Monitor (with HDMI connectivity);</li><li>Micro HDMI cable (if monitor doesn't have one)</li><li>HDMI adaptors (if your monitor predates HDMI, like mine)<br></li><li>USB connecting keyboard</li><li>USB connecting mouse</li></ul><li><span style="color: var(--eb-text-primary-color); font-family: var(--font-base); font-size: 1em; font-weight: var(--font-weight-normal);">Optional but recommended: Raspberry pi case (I used the "Official Raspberry Pi 4 Case")</span><br></li><li><span style="color: var(--eb-text-primary-color); font-family: var(--font-base); font-size: 1em; font-weight: var(--font-weight-normal);">Password manager (<a href="https://keepassxc.org/" target="_blank">KeePassXC</a> works well for these things, open source, secure, local)</span></li><li><span style="color: var(--eb-text-primary-color); font-family: var(--font-base); font-size: 1em; font-weight: var(--font-weight-normal);"><a href="https://www.raspberrypi.org/software/" target="_blank">Raspberry Pi imager software</a> (Windows, Mac, Linux optiions)</span></li><li><span style="color: var(--eb-text-primary-color); font-family: var(--font-base); font-size: 1em; font-weight: var(--font-weight-normal);">The <a href="https://www.torproject.org/" target="_blank">Tor Browser</a> (for testing)</span></li></ul></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 26 June 2021</p><ul class="post__tag"><li><a href="https://treacherous.tech/yolo-tech/">yolo tech</a></li></ul></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://treacherous.tech/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://treacherous.tech/mirroring-a-site-on-a-onion-address.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Mirroring a site on a .onion address</a></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>Watch this space!</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://treacherous.tech/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://treacherous.tech/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>