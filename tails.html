<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>The machine in the middle</title><meta name="description" content="Here's a work station you can use to open files you get from strangers on the internet and when your done with your work, easily wipe it before using it ever again."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://treacherous.tech/tails.html"><link rel="alternate" type="application/atom+xml" href="https://treacherous.tech/feed.xml"><link rel="alternate" type="application/json" href="https://treacherous.tech/feed.json"><meta property="og:title" content="The machine in the middle"><meta property="og:image" content="https://treacherous.tech/media/posts/11/usb.jpg"><meta property="og:site_name" content="treacherous.tech"><meta property="og:description" content="Here's a work station you can use to open files you get from strangers on the internet and when your done with your work, easily wipe it before using it ever again."><meta property="og:url" content="https://treacherous.tech/tails.html"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@andrewfordlyons"><meta name="twitter:title" content="The machine in the middle"><meta name="twitter:description" content="Here's a work station you can use to open files you get from strangers on the internet and when your done with your work, easily wipe it before using it ever again."><meta name="twitter:image" content="https://treacherous.tech/media/posts/11/usb.jpg"><link rel="shortcut icon" href="https://treacherous.tech/media/website/favicon.ico" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root{--body-font:'Ubuntu',sans-serif;--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:'Ubuntu',sans-serif;--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://treacherous.tech/assets/css/style.css?v=2225c0990de0fc654d3d6a43c0be230b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://treacherous.tech/tails.html"},"headline":"The machine in the middle","datePublished":"2021-07-05T09:20","dateModified":"2021-07-20T22:42","image":{"@type":"ImageObject","url":"https://treacherous.tech/media/posts/11/usb.jpg","height":800,"width":1200},"description":" Create a weigh station to open strange files from the internet. Here's another instalment in our irregular YOLO tech series. If you've been following the news, then you'll be up on the latest about Israeli spyware vendor NSO&hellip;","author":{"@type":"Person","name":"Yours Truly"},"publisher":{"@type":"Organization","name":"Yours Truly"}}</script><meta http-equiv="onion-location" content="https://ygwdnjw2gt6sabcrhjqmpgsn4hhddomhipdpxbx6bru2zr2damxevqyd.onion"></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://treacherous.tech/">treacherous.tech</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://treacherous.tech/contact.html" target="_self">Ping me</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://treacherous.tech/media/posts/11/usb.jpg" srcset="https://treacherous.tech/media/posts/11/responsive/usb-xs.jpg 300w, https://treacherous.tech/media/posts/11/responsive/usb-sm.jpg 480w, https://treacherous.tech/media/posts/11/responsive/usb-md.jpg 768w, https://treacherous.tech/media/posts/11/responsive/usb-lg.jpg 1024w, https://treacherous.tech/media/posts/11/responsive/usb-xl.jpg 1360w, https://treacherous.tech/media/posts/11/responsive/usb-2xl.jpg 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="800" width="1200" alt="USB stick closeup"><figcaption>CC0 Public Domain</figcaption></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-07-05T09:20">5 July 2021</time></div><h1>The machine in the middle</h1><div class="post__meta post__meta--author"><a href="https://treacherous.tech/authors/yours-truly/" class="feed__author invert">Yours Truly</a></div></div></header></div><div class="wrapper post__entry"><h3 id="create-a-weigh-station-to-open-strange-files-from-the-internet">Create a weigh station to open strange files from the internet.</h3><p>Here's another instalment in our irregular <a href="https://treacherous.tech/yolo-tech/">YOLO tech</a> series. If you've been following the news, then you'll be up on the latest about Israeli spyware vendor NSO Group, <a href="https://www.occrp.org/en/the-pegasus-project/" target="_blank">which licenses its Pegasus intrusion software</a> to various corrupt regimes and dictators to target human rights activists, political opponents, civil society leaders <a href="https://cdn.occrp.org/projects/project-p/?_gl=1*3exyzb*_ga*MTYzNzgzNjE4NC4xNjIwNjUzODA0*_ga_NHCZV5EYYY*MTYyNjgxNDU3Mi45LjEuMTYyNjgxNDYwNC4yOA..#/professions/journalist" target="_blank">and journalists</a>.&nbsp; This kind of thing is why <a href="https://treacherous.tech/yolo.html">YOLO devices</a> -- those gadgets you want to connect with the unwashed and the unknown -- should exist. They can be the expendable team. The tech that can take the hit without bringing everything else down.&nbsp; Here's a work station you can use to open files you get from strangers on the internet and when your done with your work, easily wipe it before using it ever again.</p><p>In an <a href="https://treacherous.tech/hosting-a-secure-contact-form.html">earlier post</a>, we looked at how a journalist can create a secured, anonymous way for sources to send files and messages using Onionshare on a Raspberry Pi. Receiving files, though, is just the first thing. What happen they start landing? In may ways, if you've done this, you haven't solved a problem so much as you've invited more of them into your life. Sorry 'bout that. What you'll now want is a secure way to check your Onionshare device, initially examine the files on it, and figure out what to do with them. So, our next piece of <a href="https://treacherous.tech/yolo.html">YOLO tech</a> is the weigh station machine.&nbsp;</p><p>People will send you a lot of nonsense. Someone might send you something useful. Or they might just drop some malware disguised as an interesting looking PDF file. Eiither way, you really don't want to download whatever lands in your Onionshare folder straight onto your nice reporting machine without first checking it out. All strange files are suspect. Those coming from strangers on the internet are even more suspect. So, let's create a an airlock to check these files out, open them up, read them and see what they're really made of. In this way, these files don't stay on your Onionshare Pi, and they don't reach your reporting machine. This is reportedly what happens when people use <a href="https://securedrop.org/" target="_blank">SecureDrop</a> properly: the files are moved to a <a href="https://docs.securedrop.org/en/stable/journalist.html#moving-documents-to-the-secure-viewing-station" target="_blank">mid-way laptop for opening and inspecting</a>. We're going to replicate this step on the cheap.</p><p>For our own home brew limbo machine, we're going to use <a href="https://tails.boum.org/" target="_blank">Tails OS</a>. This is a secured, Linux operating system that's portable and can run on many types of computers from a USB stick. By default it's also an amnesiac, meaning, when you turn it off, anything that was done is lost, and next time you turn it on, it starts fresh. Whatever machine that's running it will also have no record of any activity. It can useful to carry a Tails USB around, because then a lot of different computers can be your computer, and when you're done, there's no trace you were on it. All its internet traffic is channeled through the Tor network as well, so your web visits stay private and you can stay more anonymous.</p><p>But none of that is related to our use case this time. We just want to have an operating system that will take a bullet for us. The reason we're using it here is fairly straight-forward: It's cheap, secure, and if something goes wrong, it's easy to erase, reboot and start again, and the computer you're using it on will almost surely be fine as well. For more about Tails, <a href="https://tails.boum.org/doc/index.en.html" target="_blank">the documentation is here</a>.&nbsp;</p><h3 id="ingredients-for-our-recipe">Ingredients for our recipe</h3><ul><li><strong>1 USB stick </strong>for running the Tails OS (minimum recommendation is 8gb, but for doing things with reasonably sized files, I say go large. I'm running mine on a 64gb stick)</li><li><strong>A desktop or laptop machin</strong><strong>e</strong> with a 64-bit x86-64 compatible processor. I'm running mine on an old, fairly damaged Lenovo Thinkpad E560 that work was getting ready to recycle. The point is, you don't need anything very special for this. Try looking around pawn shops or second-hand sores, you can find something for Â£150 or likely less that will fit the bill. It's possible someone you know has a machine in a closet they think is toast, but will work for this. We aren't using our reporting laptop because we want to separate our systems and it's likely you'll want to run both Tails and do your reporting at the same time.</li><li><strong>A second USB</strong> for storing your settings, passwords, moving files, etc.</li></ul><p><b>Software used:</b> <a href="https://tails.boum.org/">Tails OS</a> (note, the site has broken SSL on many pages. Welcome to open source software. It does work well in the Tor Browser and nothing else), <a href="https://filezilla-project.org/" target="_blank">Filezilla</a>, <a href="https://keepassxc.org/" target="_blank">KeePassXC</a>, and <a href="https://veracrypt.fr/en/Home.html" target="_blank">Veracrypt</a>.</p><hr class="separator separator--dots"><h3 id="the-recipe">The recipe</h3><p><b>Let's make USB stick with Tails OS on it.</b> Install Tails on your USB stick. <a href="https://tails.boum.org/doc/index.en.html" target="_blank">Go to this page</a>, scroll down to "Download, installation, and upgrade" and choose the machine you have for the download file and set up instructions. Follow those. It's pretty clear and I won't be going through them here. I did mine on a Mac. You may have something else.</p><p><strong>Try it out on your Tails USB.</strong>&nbsp;Drop it in your weigh station machine and see if everything is working. I'm assuming it's a PC of some sort, so <a href="https://tails.boum.org/doc/first_steps/start/pc/index.en.html" target="_blank">find yours here</a> to see how to make it load Tails. I went into the BIOS settings and altered the boot order so it always tries to load from the USB port first.</p><p><strong>Let's make our Tails OS persistent. </strong>Why? Because this is is a YOLO device, not a burner machine. We're going to get a few uses out of it, and likely just keep it running as it's our laptop for checking our Onionshare Pi. Persistence means that Tails will keep a little encrypted section that will maintain your settings and any other data or apps you install. Tails can walk you through setting up a persistent volume pretty easily, <a href="https://tails.boum.org/doc/first_steps/persistence/configure/index.en.html" target="_blank">but here's the the how-to if you need it</a>. Be sure to <a href="https://tails.boum.org/doc/first_steps/persistence/backup/index.en.html" target="_blank">back it up</a>!</p><p><strong>Let's add an FTP client.</strong> For whatever damned reason, Tails doesn't come with an FTP tool. Don't get me started. But we want one of these because it's easier to check the Onionshare Pi via SFTP than it will be to unmount and mount the Raspberry Pi's USB stick all the time, restarting Onionshare and so forth. So, we're going to add FileZilla to our persistent Tails volume. To do that:</p><ul><li><a href="https://tails.boum.org/doc/first_steps/welcome_screen/administration_password/index.en.html" target="_blank">Set up an administrator password</a> when starting Tails.</li><li>After Tails launches, go into the "Applications" menu in the nav bar and go to:<br>System Tools &gt;&nbsp;Synaptic Package Manager.</li><li>Use your admin password.</li><li>Search for Filezilla</li><li>Tick the box for the latest version, and in the pop-up, select "mark for installation."</li><li>Click the "apply" button, then click "apply" in the pop up window, because you mean it.&nbsp;</li><li>Let things download and then when asked, click "Install every time" or Tails won't remember to keep Filezilla if it shuts down and restarts. Then click "close" on the "changes applied" box, because for some reason that exists.</li></ul><p><b>Configure the FTP client to reach your Onionshare Raspberry Pi.</b> So, now Filezilla exists on your Tails OS. Find it in "Applications" under "Internet" nestled between your Electrum Bitcoin wallet and Onions Circuits. Open that up. If you recall from our <a href="https://treacherous.tech/hosting-a-secure-contact-form.html">Onionshare post</a>, you had set up a way to SSH into your Onionshare device from your laptop to set it up. Those credentials will work in your SFTP client.&nbsp; You should have these saved in a KeePassXC password manager if you followed things to the letter. If not, hopefully you've got it in a SAFELY stored offline text file. Because now you need it.</p><p>The Host is your Pi's IP address. Then the username is your ssh user, and the password is your ssh password. And the port will be <code>22</code>, unless you did extra credit work and futzed with that. Now navigate to your <code>/media/USB</code> directory in the Raspberry Pi (if you called it that). You should see anything that's been dropped there, including the happy little hello.txt file we made. Try downloading that into Tails and opening it to make sure things are working.</p><h3 id="test-it-out">Test it out</h3><p>Let's take our new set up for a test drive. You now have an Onionshare device to get files, and a Tails OS laptop to look at them. Send yourself a PDF. <a href="https://www.article19.org/wp-content/uploads/2021/07/Myanmar-Internet-Briefing-Paper-UPDATED.pdf" target="_blank">Here's one, now</a>.&nbsp; Save&nbsp;<code>Myanmar-Internet-Briefing-Paper-UPDATED.pdf</code> somewhere on your computer (not the Tails one, obvs). Open up the Tor Browser and visit your Onionshare form. Send the file along with a friendly text message. Now that you've done that, go to Filezilla in Tails and check your USB directory. You should see a new directory in there that you can download to your Tails machine and open. I saved it in Documents, which can be found under "places" in the nav bar.</p><p>And that's it, we have two pieces of our YOLO tech setup, now. We haven't yet looked at the operational security of using these yet, and we have one more device to cover: The YOLO phone.</p><h3 id="final-bits-and-pieces">Final bits and pieces</h3><p>Some homework before starting the next post...</p><ol><li>Tails comes installed with KeePassXC. Create a database to store your FTP and SSH credentials for the Onionshare Pi. From now on, you will only access the Pi from the Tails machine. <a href="https://keepassxc.org/docs/KeePassXC_UserGuide.html" target="_blank">Learn the finer points of password management with KeePassXC here</a>.</li><li>Tails also has Veracrypt installed. This is a tool for created encrypted file storage volumes. When you decide you want to work with a file you've inspected on Tails, you're going to want to transport it (or a redacted, meta-scrubbed copy of it or a flattened export or a screenshot of it) on a USB stick to your work machine. You're work machine will never network to the Tails machine. Also, you want to secure the USB stick. <a href="https://www.veracrypt.fr/en/Home.html" target="_blank">Learn how to make an encrypted volume with Veracrypt on your USB stick here</a>. You'll also need to install Veracrypt on the device the USB is moving files to, but it has versions for Mac Windows and Linux.</li></ol><p><b>Next post: </b>Working with files.</p><hr class="separator separator--dots"><h3 id="notes">Notes</h3><p>There are a few operating systems that run on USBs, and some that are highly secure themselves. I thought about just setting up <a href="https://www.qubes-os.org/" target="_blank">Qubes</a> and forgetting about both Tails and the Raspberry Pi. In Qubes you can create isolated environments for each. But that would require a fairly impressive machine, and these posts are focused on low-cost options. Qubes is great, but it's also not single-purpose. It's good. Great even. It's not YOLO.</p><p>It's worth noting that Tails also has Onionshare pre-installed. The issue with this is that Tails software versions are often not up to date, and it's only the latest version of Onionshare that really suits our needs. Also, you don't want collection and analysis to happen on the same device. Finally, we want our secure contact webform to stay on all the time, while we might want to turn off our laptop and put it away. Your work computer is a lousy web server.</p><p>Conceivably there are a few options you could use to connect to you Pi from Tails. You could wire it if you want, but the Pi already has it's ethernet port plugged into the router. You could create networks with USB ports or use USB ports to hand-move things, but SFTP is both secure enough, and keeps the wires and complications down.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 20 July 2021</p><ul class="post__tag"><li><a href="https://treacherous.tech/yolo-tech/">yolo tech</a></li></ul></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://treacherous.tech/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://treacherous.tech/yolo.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Some notes on setting up a YOLO work station</a></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>Watch this space!</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://treacherous.tech/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://treacherous.tech/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>